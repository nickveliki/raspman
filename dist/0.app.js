(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(n,t,e){"use strict";function o(n){return function(n){if(Array.isArray(n))return r(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}var i,c;e.r(t),e.d(t,"register",(function(){return f})),e.d(t,"login",(function(){return a})),e.d(t,"logout",(function(){return p})),e.d(t,"patch",(function(){return d})),e.d(t,"forgotPW",(function(){return m})),e.d(t,"getUserInfo",(function(){return y})),e.d(t,"removeScope",(function(){return l})),e.d(t,"getDriveInfo",(function(){return k})),e.d(t,"getProcessInfo",(function(){return w})),e.d(t,"getSystemInfo",(function(){return P})),e.d(t,"getFolderContent",(function(){return S})),e.d(t,"unmount",(function(){return v})),e.d(t,"mkdir",(function(){return j})),e.d(t,"createFile",(function(){return O})),e.d(t,"uploadFile",(function(){return T})),e.d(t,"mount",(function(){return b})),e.d(t,"block",(function(){return C})),e.d(t,"unblock",(function(){return J})),e.d(t,"addScope",(function(){return g})),e.d(t,"getText",(function(){return K})),e.d(t,"addRouteToScope",(function(){return A})),e.d(t,"submitShoppingList",(function(){return N})),e.d(t,"removeShoppingItem",(function(){return E})),e.d(t,"getShoppingList",(function(){return I})),e.d(t,"getLock",(function(){return _})),e.d(t,"getPasswords",(function(){return D})),e.d(t,"setMasterPassword",(function(){return G})),e.d(t,"checkMasterKey",(function(){return H})),e.d(t,"unsetMasterKey",(function(){return U})),e.d(t,"decryptPW",(function(){return x})),e.d(t,"setPassword",(function(){return W})),e.d(t,"getRemoteDevices",(function(){return R})),e.d(t,"setRemoteDeviceSource",(function(){return L})),e.d(t,"removeSource",(function(){return q})),e.d(t,"refreshLogin",(function(){return h})),e.d(t,"getSharedPWs",(function(){return B})),e.d(t,"stopSharedPWsQuerys",(function(){return Y})),e.d(t,"sharePW",(function(){return V})),e.d(t,"getpwmanusers",(function(){return Q})),e.d(t,"acceptPW",(function(){return $})),e.d(t,"sendEncryptedPW",(function(){return z})),e.d(t,"decryptLocal",(function(){return X}));var u=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(n=atob(n)),new Uint8Array(Array.from(n).map((function(n){return n.charCodeAt(0)}))).buffer},s=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=new Uint8Array(n).reduce((function(n,t){return("string"==typeof n?n:String.fromCharCode(n))+String.fromCharCode(t)}));return t?btoa(e):e},f=function(n,t,e){return new Promise((function(o,r){fetch("/user/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:n,passwort:t,passHint:e})}).then((function(n){n.ok?o():n.json().then(r)}),(function(n){var t=n.message;r(t)}))}))},a=function(n,t){return new Promise((function(e,o){fetch("/user/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:n,passwort:t})}).then((function(n){n.json().then((function(t){n.ok?e(t):o(t)}),o)}),(function(n){var t=n.message;o(t)}))}))},h=function(n){return new Promise((function(t,e){fetch("/user/refreshlogin?token="+n.replace(/\//g,"%2f").replace(/\+/g,"%2b")).then((function(n){n.json().then((function(o){n.ok?t(o):e(o)}))}))}))},p=function(n){return new Promise((function(t,e){i=void 0,fetch("/user/logout",{headers:{token:n}}).then((function(n){n.ok?t():n.json().then(e)}),(function(n){var t=n.message;e(t)}))}))},d=function(n,t,e,o){return new Promise((function(r,i){fetch("/user/patch",{method:"POST",headers:{token:o,"content-type":"application/json"},body:JSON.stringify({name:n,passHint:e,passwort:t})}).then((function(n){n.ok?r():n.json().then(i,i)}),(function(n){var t=n.message;i(t)}))}))},m=function(n){return new Promise((function(t,e){fetch("/user/forgotpw",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:n})}).then((function(n){n.ok?t():n.json().then(e,e)}),(function(n){var t=n.message;e(t)}))}))},y=function(n){return new Promise((function(t,e){fetch("/admin/users",{headers:{token:n}}).then((function(n){n.json().then((function(o){n.ok?t(o):e(o)}),e)}),(function(n){var t=n.message;e(t)}))}))},l=function(n,t,e){return new Promise((function(o,r){fetch("/admin/removescope",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({uid:n,scope:t})}).then((function(n){n.ok?o():n.json().then(r,r)}),(function(n){var t=n.message;r(t)}))}))},g=function(n,t,e){return new Promise((function(o,r){fetch("/admin/addscope",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({uid:n,scope:t})}).then((function(n){n.ok?o():n.json().then(r,r)}),(function(n){var t=n.message;r(t)}))}))},k=function(){return new Promise((function(n,t){fetch("/info/driveinfo").then((function(e){e.json().then((function(o){e.ok?n(o):t(o)}),t)}),(function(n){var e=n.message;t(e)}))}))},w=function(){return new Promise((function(n,t){fetch("/info/processes").then((function(e){e.json().then((function(o){e.ok?n(o):t(o)}))}),(function(n){var e=n.message;t(e)}))}))},P=function(){return new Promise((function(n,t){fetch("/info/system").then((function(e){e.json().then((function(o){e.ok?n(o):t(o)}))}),(function(n){var e=n.message;t(e)}))}))},S=function(n,t){return new Promise((function(e,o){fetch("/files/foldercontent",{method:"POST",headers:{token:t,"content-type":"application/json"},body:JSON.stringify({path:n})}).then((function(n){n.json().then((function(t){n.ok?e(t):o(t)}))}),(function(n){var t=n.message;o(t)}))}))},v=function(n,t){return new Promise((function(e,o){fetch("/admin/unmount",{method:"POST",headers:{token:t,"content-type":"application/json"},body:JSON.stringify({mount:n})}).then((function(n){n.ok?e():n.json().then(o,o)}),(function(n){var t=n.message;o(t)}))}))},b=function(n,t,e){return new Promise((function(o,r){fetch("/admin/mount",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({dev:n,path:t})}).then((function(n){n.ok?o({driveInfo:void 0}):n.json().then(r,r)}),(function(n){var t=n.message;r(t)}))}))},j=function(n,t,e){return new Promise((function(r,i){fetch("/admin/mkdir",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({path:"/"+[].concat(o(n.split("/").filter((function(n){return n.length}))),[t]).join("/")})}).then((function(n){n.ok?r():n.json().then(i,i)}),(function(n){var t=n.message;i(t)}))}))},O=function(n,t,e){return new Promise((function(r,i){fetch("/file/newfile",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({path:"/"+[].concat(o(n.split("/").filter((function(n){return n.length}))),[t]).join("/")})}).then((function(n){n.ok?r():n.json().then(i,i)}),(function(n){var t=n.message;i(t)}))}))},T=function(n,t,e){return new Promise((function(o,r){fetch("/file/upload",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({path:n,FileInfo:t})}).then((function(n){n.ok?o():n.json().then(r,r)}),(function(n){var t=n.message;r(t)}))}))},C=function(n,t,e){return new Promise((function(o,r){fetch("/admin/block",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({uid:n,blocked:t})}).then((function(n){n.ok?o():n.json().then(r,r)}),(function(n){var t=n.message;r(t)}))}))},J=function(n,t){return new Promise((function(e,o){fetch("/admin/unblock",{method:"POST",headers:{token:t,"content-type":"application/json"},body:JSON.stringify({uid:n})}).then((function(n){n.ok?e():n.json().then(o,o)}),(function(n){var t=n.message;o(t)}))}))},K=function(n,t){return new Promise((function(e,o){fetch(""+"/files/text/".concat(n.replace(/\//g,"%2f"),"?token=").concat(t.replace(/\//g,"%2f").replace(/\+/g,"%2b"))).then((function(n){n.text().then((function(t){n.ok?e(t):o(t)}),o)}),(function(n){var t=n.message;o(t)}))}))},A=function(n,t,e){return new Promise((function(o,r){fetch("/files/scope",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({path:n,scope:t})}).then((function(n){n.ok?o():n.json().then(r,r)}),(function(n){var t=n.message;r(t)}),r)}))},N=function(n,t){return new Promise((function(e,o){fetch("/shopping/list",{method:"POST",headers:{token:t,"content-type":"application/json"},body:JSON.stringify(n)}).then((function(n){n.json().then((function(t){n.ok?e(t):o(t)}),o)}),o)}))},E=function(n,t){var e=n.item,o=n.quantity,r=n.quantityType,i=n.ok;return new Promise((function(n,c){fetch("/shopping/item",{method:"POST",headers:{token:t,"content-type":"application/json"},body:JSON.stringify({item:e,quantity:o,quantityType:r,ok:i})}).then((function(t){t.ok?n():t.json().then(c,c)}),c)}))},I=function(n){return new Promise((function(t,e){fetch("/shopping/list",{headers:{token:n}}).then((function(n){n.json().then((function(o){n.ok?t(o):e(o)}),e)}),e)}))},_=function(n){return new Promise((function(t,e){fetch("/user/lock",{headers:{token:n}}).then((function(n){n.json().then(t,e)}),e)}))},D=function(n){return new Promise((function(t,e){fetch("/pwman/pwid?id=all",{headers:{token:n}}).then((function(n){n.json().then((function(o){n.ok?t(o):e(o)}),(function(n){e(JSON.stringify(n))}))}),e)}))},M=function(n,t){return new Promise((function(e,o){crypto.subtle.importKey("raw",u(n),"PBKDF2",!1,["deriveKey"]).then((function(n){crypto.subtle.deriveKey({name:"PBKDF2",hash:"SHA-256",salt:new Uint8Array(Array.from(atob(t)).map((function(n){return n.charCodeAt(0)}))),iterations:1e5},n,{name:"AES-GCM",length:256},!1,["decrypt","encrypt"]).then((function(n){i=n,e()}),o)}),o)}))},H=function(n,t,e){return new Promise((function(o,r){var i=u(n+t);crypto.subtle.digest("sha-256",i).then((function(i){var c=s(i,!0);F(e).then((function(i){crypto.subtle.digest("sha-256",u(c+i)).then((function(i){fetch("/pwman/checkmaster",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({hash:s(i,!0)})}).then((function(e){e.ok?M(n,t).then((function(){o(c)}),r):e.json().then(r,r)}),r)}),r)}),r)}),r)}))},G=function(n,t){return new Promise((function(e,o){var r=new Uint8Array(32);crypto.getRandomValues(r);var i=s(r,!0),c=u(t+i);crypto.subtle.digest("sha-256",c).then((function(r){var c=s(r,!0);fetch("/pwman/master",{method:"POST",headers:{token:n,"content-type":"application/json"},body:JSON.stringify({salt:i,hash:c})}).then((function(n){n.ok?M(t,i).then((function(){e({hash:c,salt:i})}),o):n.json().then(o,(function(n){o(JSON.stringify(n))}))}),o)}),console.log)}))},U=function(){i=void 0},x=function(n,t,e){return new Promise((function(o,r){F(e).then((function(c){crypto.subtle.digest("sha-256",u(t+c)).then((function(t){fetch("/pwman/pwid?id="+n+"&hash="+s(t,!0).replace(/[\+\/]/g,(function(n){return"%"+n.charCodeAt(0).toString(16)})),{headers:{token:e}}).then((function(n){n.json().then((function(t){n.ok?crypto.subtle.decrypt({name:"AES-GCM",length:256,iv:u(t.salt,!0)},i,u(t.crypt,!0)).then((function(n){o(s(n))}),r):r(t)}),r)}),r)}),r)}),r)}))},W=function(n,t,e,o){return new Promise((function(r,c){var f=new Uint8Array(16);crypto.getRandomValues(f),F(o).then((function(a){crypto.subtle.digest("sha-256",u(t+a)).then((function(t){crypto.subtle.encrypt({name:"AES-GCM",length:256,iv:f},i,u(e)).then((function(e){var i=s(e,!0),u=s(f,!0);fetch("/pwman/password",{method:"POST",headers:{token:o,"content-type":"application/json"},body:JSON.stringify({hash:s(t,!0),id:n,crypt:i,salt:u})}).then((function(n){n.ok?r({salt:u,crypt:i}):n.json().then(c,c)}),c)}),(function(n){console.error(n),c("encryption error")}))}),c)}),c)}))},F=function(n){return new Promise((function(t,e){fetch("/pwman/nonce",{headers:{token:n}}).then((function(n){n.arrayBuffer().then((function(n){t(s(n,!0))}),e)}))}))},R=function(n){return new Promise((function(t,e){fetch("/remotecontrol/",{headers:{token:n}}).then((function(n){n.json().then((function(o){n.ok?t(o):e(o)}))}))}))},L=function(n,t,e){return new Promise((function(o,r){fetch("/remotecontrol/event",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({address:n,message:"cmd01 ".concat(t)})}).then((function(n){n.ok?o():n.json().then(r,r)}),r)}))},q=function(n,t,e){return new Promise((function(o,r){fetch("/remotecontrol/event",{method:"POST",headers:{token:e,"content-type":"application/json"},body:JSON.stringify({address:t,message:"cmd02 ".concat(n)})}).then((function(n){n.ok?o():n.json().then(r,r)}),r)}))},B=function(n,t){c=setInterval((function(){fetch("/pwman/sharingpws",{headers:{token:n}}).then((function(n){n.ok&&n.json().then((function(n){t({type:"setsharedpws",sharedpws:n})}),(function(){}))}))}),1e4)},V=function(n,t,e){return new Promise((function(o,r){crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then((function(i){crypto.subtle.exportKey("pkcs8",i.privateKey).then((function(c){crypto.subtle.exportKey("spki",i.publicKey).then((function(i){localStorage.setItem("".concat(t,"_").concat(e),s(c,!0)),fetch("/pwman/sharepw",{method:"POST",headers:{"content-type":"application/json",token:n},body:JSON.stringify({target_id:t,target_pw_id:e,temp_pub:s(i,!0)})}).then((function(n){n.ok?o():n.json().then(r)}),r)}),r)}),r)}),r)}))},Q=function(n){return new Promise((function(t,e){fetch("/pwman/pwmanusers",{headers:{token:n}}).then((function(n){n.json().then((function(o){n.ok?t(o):e(o)}))}))}))},$=function(n,t,e,o){return new Promise((function(r,i){crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then((function(c){console.log(c),crypto.subtle.exportKey("spki",c.publicKey).then((function(f){console.log(f),crypto.subtle.importKey("spki",u(o,!0),{name:"ECDH",namedCurve:"P-256"},!1,["deriveKey"]).then((function(o){console.log(o),crypto.subtle.deriveKey({name:"ECDH",public:o},c.privateKey,{name:"AES-GCM",length:256},!0,["decrypt","encrypt"]).then((function(o){console.log(o),crypto.subtle.exportKey("raw",o).then((function(o){console.log(o),localStorage.setItem("".concat(t,"_").concat(e),s(o,!0)),fetch("/pwman/acceptpw",{method:"POST",headers:{"content-type":"application/json",token:n},body:JSON.stringify({sharer_id:t,target_pw_id:e,temp_pub:s(f,!0)})}).then((function(n){n.ok?r():n.json().then(i,i)}))}))}))}))}))}))}))},z=function(n,t,e,o,r){return new Promise((function(i,c){crypto.subtle.importKey("pkcs8",u(localStorage.getItem("".concat(t,"_").concat(e)),!0),{name:"ECDH",namedCurve:"P-256"},!1,["deriveKey"]).then((function(f){console.log(f),crypto.subtle.importKey("spki",u(o,!0),{name:"ECDH",namedCurve:"P-256"},!1,["deriveKey"]).then((function(o){console.log(o),crypto.subtle.deriveKey({name:"ECDH",public:o},f,{name:"AES-GCM",length:256},!1,["encrypt"]).then((function(o){console.log(o);var f=crypto.getRandomValues(new Uint8Array(12));crypto.subtle.encrypt({name:"AES-GCM",iv:f},o,u(r)).then((function(o){console.log(o),fetch("/pwman/encryptedpwtoshare",{method:"POST",headers:{"content-type":"application/json",token:n},body:JSON.stringify({target_id:t,target_pw_id:e,iv:s(f,!0),encrypted_pw:s(o,!0)})}).then((function(n){n.ok?i():n.json().then(c,c)}),console.error)}),console.error)}),console.error)}),console.error)}),console.error)}))},X=function(n,t,e,o){return new Promise((function(r,i){crypto.subtle.importKey("raw",u(localStorage.getItem("".concat(o,"_").concat(e)),!0),{name:"AES-GCM",length:256},!1,["decrypt"]).then((function(e){crypto.subtle.decrypt({name:"AES-GCM",iv:u(t,!0)},e,u(n,!0)).then((function(n){r(s(n))}),i)}),i)}))},Y=function(){clearInterval(c)}}}]);